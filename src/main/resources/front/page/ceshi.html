<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>eth实时价格计算</title>
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=no,minimal-ui">
    <link rel="icon" href="./../images/favico.ico">
    <!--不同屏幕尺寸根字体设置-->
    <script src="./../js/base.js"></script>
    <!--element-ui的样式-->
    <link rel="stylesheet" href="../../backend/plugins/element-ui/index.css"/>
    <!--引入vant样式-->
    <link rel="stylesheet" href="../styles/vant.min.css"/>
    <!-- 引入样式  -->
    <!--<link rel="stylesheet" href="../styles/index.css"/>-->
    <!--本页面内容的样式-->
    <link rel="stylesheet" href="./../styles/address.css"/>
    <style>
        .about{
            font-size: 20px;
            padding-left: 5%;
            padding-right: 5%;
            padding-top: 20px;
            position: absolute;
            height: 75%;
            width: 90%;
            /*height: 500px; !* 设置内容高度 *!*/
            overflow-y: scroll; /* 启用垂直滚动 */
            overflow-x: hidden; /* 禁用水平滚动 */
        }
        [v-cloak] {
            display: none;
        }

        .el-form-item__label {
            width: 110px !important;
        }

        .el-form-item__content {
            margin-left: 120px !important;
        }

        .about .el-button--primary, .el-button + .el-button {
            width: 46%;
        }

        .about .el-col-11 {
            width: 60%;
        }

        .el-date-editor.el-input, .el-date-editor.el-input__inner {
            float: left;
        }

        .nm .el-select {
            width: 100px;
        }

        .nm ol, ul {
            margin: revert;
        }

        .nm .el-select-dropdown__list {
            width: fit-content;
        }

        #wc {
            position: fixed;
            bottom: 0;
            width: 90%;
            padding-bottom: 5%;
        }

    </style>
</head>

<body>
<div class="about" v-cloak>
    <el-form ref="form" :model="form" :rules="rules" label-width="80px" class="nm">

        <el-form-item label="送货时间">
            <div class="block">
                <el-date-picker
                        v-model="form.date"
                        type="datetime"
                        placeholder="选择日期时间"
                        default-time="10:00:00">
                </el-date-picker>
            </div>
        </el-form-item>
        <el-form-item label="送货人姓名" prop="name">
            <el-input v-model="form.name"></el-input>
        </el-form-item>
        <el-form-item label="送货人手机号" prop="phone">
            <el-input v-model="form.phone"></el-input>
        </el-form-item>
        <el-form-item label="送货车牌" prop="sign">
            <el-input v-model="form.sign"></el-input>
        </el-form-item>

        <el-form-item label="货物1">
            <el-input placeholder="请按顺序输入数量,价格,型号,生产厂家并以英文逗号分隔" v-model="form.number1" class="input-with-select">
                <el-select v-model="form.select1" slot="prepend" placeholder="请选择">
                    <el-option label="CPU" value="1"></el-option>
                    <el-option label="硬盘" value="2"></el-option>
                    <el-option label="内存" value="3"></el-option>
                    <el-option label="显卡" value="4"></el-option>
                    <el-option label="键盘" value="5"></el-option>
                    <el-option label="鼠标" value="6"></el-option>
                </el-select>
            </el-input>
        </el-form-item>

        <el-form-item label="货物2">
            <el-input placeholder="请按顺序输入数量,价格,型号,生产厂家并以英文逗号分隔" v-model="form.number2" class="input-with-select">
                <el-select v-model="form.select2" slot="prepend" placeholder="请选择">
                    <el-option label="CPU" value="1"></el-option>
                    <el-option label="硬盘" value="2"></el-option>
                    <el-option label="内存" value="3"></el-option>
                    <el-option label="显卡" value="4"></el-option>
                    <el-option label="键盘" value="5"></el-option>
                    <el-option label="鼠标" value="6"></el-option>
                </el-select>
            </el-input>
        </el-form-item>

        <el-form-item label="货物3">
            <el-input placeholder="请按顺序输入数量,价格,型号,生产厂家并以英文逗号分隔" v-model="form.number3" class="input-with-select">
                <el-select v-model="form.select3" slot="prepend" placeholder="请选择">
                    <el-option label="CPU" value="1"></el-option>
                    <el-option label="硬盘" value="2"></el-option>
                    <el-option label="内存" value="3"></el-option>
                    <el-option label="显卡" value="4"></el-option>
                    <el-option label="键盘" value="5"></el-option>
                    <el-option label="鼠标" value="6"></el-option>
                </el-select>
            </el-input>
        </el-form-item>

        <el-form-item label="货物4">
            <el-input placeholder="请按顺序输入数量,价格,型号,生产厂家并以英文逗号分隔" v-model="form.number4" class="input-with-select">
                <el-select v-model="form.select4" slot="prepend" placeholder="请选择">
                    <el-option label="CPU" value="1"></el-option>
                    <el-option label="硬盘" value="2"></el-option>
                    <el-option label="内存" value="3"></el-option>
                    <el-option label="显卡" value="4"></el-option>
                    <el-option label="键盘" value="5"></el-option>
                    <el-option label="鼠标" value="6"></el-option>
                </el-select>
            </el-input>
        </el-form-item>

        <el-form-item label="货物5">
            <el-input placeholder="请按顺序输入数量,价格,型号,生产厂家并以英文逗号分隔" v-model="form.number5" class="input-with-select">
                <el-select v-model="form.select5" slot="prepend" placeholder="请选择">
                    <el-option label="CPU" value="1"></el-option>
                    <el-option label="硬盘" value="2"></el-option>
                    <el-option label="内存" value="3"></el-option>
                    <el-option label="显卡" value="4"></el-option>
                    <el-option label="键盘" value="5"></el-option>
                    <el-option label="鼠标" value="6"></el-option>
                </el-select>
            </el-input>
        </el-form-item>

        <el-form-item label="货物6">
            <el-input placeholder="请按顺序输入数量,价格,型号,生产厂家并以英文逗号分隔" v-model="form.number6" class="input-with-select">
                <el-select v-model="form.select6" slot="prepend" placeholder="请选择">
                    <el-option label="CPU" value="1"></el-option>
                    <el-option label="硬盘" value="2"></el-option>
                    <el-option label="内存" value="3"></el-option>
                    <el-option label="显卡" value="4"></el-option>
                    <el-option label="键盘" value="5"></el-option>
                    <el-option label="鼠标" value="6"></el-option>
                </el-select>
            </el-input>
        </el-form-item>
    </el-form>
    <div id="wc">
        <el-button type="primary" @click="onSubmit('form')">提交</el-button>
        <el-button @click="excel">导出excel</el-button>
    </div>
</div>

<!-- 开发环境版本,包含了有帮助的命令行警告 -->
<script src="../../backend/plugins/vue/vue.js"></script>
<!-- 引入组件库 -->
<script src="../../backend/plugins/element-ui/index.js"></script>
<!-- 引入vant样式 -->
<script src="./../js/vant.min.js"></script>
<script src="./../api/address.js"></script>
<!-- 引入axios -->
<script src="../../backend/plugins/axios/axios.min.js"></script>
<script src="./../js/request.js"></script>
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.4.2/dist/echarts.min.js"></script>
<script>
    new Vue({
        el: ".about",
        data() {
            return {
                form: {
                    name: '',
                    date: '',
                    phone: '',
                    sign: ''
                },
                rules: {
                    name: [
                        {required: true, message: '请输入姓名', trigger: 'blur'},
                        {pattern: /^[\u4e00-\u9fa5]{2,}$/, message: '输入不合法，请重新输入', trigger: 'blur'}
                    ],
                    phone: [
                        {required: true, message: '请输入手机号', trigger: 'blur'},
                        {pattern: /^1[3-9]\d{9}$/, message: '输入不合法，请重新输入', trigger: 'blur'}
                    ],
                    sign: [
                        {required: true, message: '请输入车牌', trigger: 'blur'},
                    ]
                }
            };
        },
        mounted() {
            const date = new Date();
            date.setHours(10, 0, 0, 0);
            this.form.date = date;
        },
        methods: {
            onSubmit(formName) {
                this.$refs[formName].validate((valid) => {
                    if (valid) {
                        console.log(this.form)
                        $axios.post("/ceShi", {
                            name: this.form.name,
                            date: this.form.date,
                            phone: this.form.phone,
                            sign: this.form.sign,
                            select1: this.form.select1,
                            number1: this.form.number1,
                            select2: this.form.select2,
                            number2: this.form.number2,
                            select3: this.form.select3,
                            number3: this.form.number3,
                            select4: this.form.select4,
                            number4: this.form.number4,
                            select5: this.form.select5,
                            number5: this.form.number5,
                            select6: this.form.select6,
                            number6: this.form.number6,

                        })
                            .then((res) => {
                                this.form = {};
                                if (res.code === 1) {
                                    this.$notify({type: 'warning', message: '已提交'});
                                }
                            })
                            .catch(err => {
                                this.$notify({type: 'warning', message: '程序出错'});
                            })
                    } else {
                        this.$message({
                            type: 'info',
                            message: '校验失败，请检查'
                        });
                    }
                });
            },
            excel() {
                $axios.post("/ceShi/excel")
                axios.get('/ceShi',{ responseType: 'blob' })
                    .then(response => {
                        const url = URL.createObjectURL(new Blob([response.data]))
                        const link = document.createElement('a')
                        link.href = url
                        link.download = 'ceshi.xlsx'
                        link.click()
                        URL.revokeObjectURL(url)
                    })
            }
        }
    })
</script>
</body>
</html>