<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=no,minimal-ui">

<div class="message">
    <div class="avatar"></div>
    <div class="content">这是一条消息</div>
</div>
<input type="text" id="abc">

<script>
    // 监听消息内容的长按事件
    const messages = document.querySelectorAll('.message');
    messages.forEach((message) = > {
        let isPressed = false;
    let longPressTimerId;

    message.addEventListener('touchstart', onMessagePressStart);
    message.addEventListener('touchend', onMessagePressEnd);
    message.addEventListener('mousedown', onMessagePressStart);
    message.addEventListener('mouseup', onMessagePressEnd);

    function onMessagePressStart(event) {
        isPressed = true;
        // 设置计时器，1秒后触发长按事件
        longPressTimerId = setTimeout(() = > {
            if(isPressed) {
                // 取消默认事件，避免影响用户选择文本
                event.preventDefault();
                // 获取长按的消息元素
                const message = event.target;
                // 获取长按的消息内容
                const messageContent = message.innerText;
                document.getElementById("abc").value = messageContent
                // 弹出用户的消息内容
                alert(messageContent);
            }
        }, 1000
    )
        ;
    }

    function onMessagePressEnd() {
        // 取消长按事件的计时器
        clearTimeout(longPressTimerId);
        isPressed = false;
    }
    })
    ;
</script>

